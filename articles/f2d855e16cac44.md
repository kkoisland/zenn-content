---
title: "React Router v6ä½¿ç”¨æ™‚ã®è­¦å‘Šã¨v7ã§ã®å¤‰æ›´ç‚¹"
emoji: "ğŸ¥"
type: "tech"
topics: ["javascript", "react", "typescript", "frontend", "reactrouter"]
published: true
---

React Router v6ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹éš›ã«ãƒ¯ãƒ¼ãƒ‹ãƒ³ã‚°ãŒå‡ºãŸã®ã§ã€v7ã§ã®å¤‰æ›´ç‚¹ã‚’èª¿ã¹ã¦ã¾ã¨ã‚ã¦ã¿ã¾ã—ãŸã€‚

## React Router v7ã§ã¯ã€Œã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ«ãƒ¼ãƒˆï¼ˆ*ï¼‰ã€ã®ç›¸å¯¾ãƒ‘ã‚¹è§£æ±ºæ–¹æ³•ãŒå¤‰æ›´
**Warningã®å†…å®¹**:
`hook.js:608 âš ï¸ React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early.`
**è§£æ±º**:
React Router v6ã§æœ‰åŠ¹åŒ–ã™ã‚‹ã«ã¯ã€`future={{ v7_relativeSplatPath: true }}`ã®ãƒ•ãƒ©ã‚°ã‚’è¨­å®šã™ã‚‹ã€‚
```tsx
 <BrowserRouter future={{ v7_relativeSplatPath: true }}>
 //...
</BrowserRouter>
```
**èª¬æ˜**:
ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ«ãƒ¼ãƒˆã¨ã¯: æœªå®šç¾©ã®ãƒ‘ã‚¹ãŒå…¨ã¦ãƒãƒƒãƒã™ã‚‹ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«ä½¿ã†ã€‚
```tsx
<BrowserRouter>
  <Routes>
    <Route path="/" element={<Home />} />
    <Route path="script" element={<ScriptManagement />} />
    <Route path="settings" element={<Settings />} />
    <Route path="output" element={<OutputManagement />} />
    <Route path="*" element={<NotFound />} />
  </Routes>
</BrowserRouter>
```
**NotFound ã®ä¸­ã«ä»¥ä¸‹ãŒã‚ã‚‹å ´åˆ**:
```tsx
<Link to="about">About</Link>
```
**v6ã§ã¯**:
ã€Œ/aboutã€ã¨è§£é‡ˆã•ã‚Œã‚‹

**v7ã§ã¯**:
ã€Œ/unknown-path/aboutã€ã¨è§£é‡ˆã•ã‚Œã‚‹


## React Router v7ã§ã¯React.startTransitionãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«
**Warningã®å†…å®¹**:
`React Router Future Flag Warning: React Router will begin wrapping state updates in React.startTransition in v7. You can use the v7_startTransition future flag to opt-in early. `
**è§£æ±º**:
React Router v6ã§æœ‰åŠ¹åŒ–ã™ã‚‹ã«ã¯ã€`future={{ v7_startTransition: true }}`ã®ãƒ•ãƒ©ã‚°ã‚’è¨­å®šã—ã¾ã™ã€‚
```tsx
 <BrowserRouter future={{ v7_startTransition: true }}>
 //...
</BrowserRouter>
```
### ä¾‹: React.startTransition ã‚’ä½¿ã‚ãªã„å ´åˆï¼ˆv6ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
é‡ã„çŠ¶æ…‹æ›´æ–°ãŒå³åº§ã«å‡¦ç†ã•ã‚Œã‚‹ãŸã‚ã€UIãŒãƒ•ãƒªãƒ¼ã‚ºã—ã€å…¥åŠ›ãŒé…ã‚Œã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚
```tsx
 import React, { useState } from 'react';

const App = () => {
  const [items, setItems] = useState<number[]>([]);
  const [inputValue, setInputValue] = useState('');

  const handleAddItems = () => {
    // é‡ã„çŠ¶æ…‹æ›´æ–°
    const newItems = Array(10000).fill(0).map((_, i) => i);
    setItems(newItems); // UIãŒä¸€æ™‚çš„ã«ãƒ•ãƒªãƒ¼ã‚ºã™ã‚‹å¯èƒ½æ€§
  };

  return (
    <div>
      <input
        value={inputValue}
        onChange={(e) => setInputValue(e.target.value)} // ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒé…ããªã‚‹å¯èƒ½æ€§
        placeholder="Type something"
      />
      <button onClick={handleAddItems}>Add Items</button>
      <div>
        {items.map((item) => (
          <div key={item}>Item {item}</div>
        ))}
      </div>
    </div>
  );
};
export default App;
```
### ä¾‹: React.startTransition ã‚’ä½¿ã†å ´åˆï¼ˆv7ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
`React.startTransition` ã‚’ä½¿ç”¨ã—ã¦é‡ã„çŠ¶æ…‹æ›´æ–°ã‚’éåŒæœŸçš„ã«å‡¦ç†ã™ã‚‹ãŸã‚ã€å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒã‚¹ãƒ ãƒ¼ã‚ºã«ãªã‚‹ã€‚
```tsx
import React, { useState, startTransition } from 'react';

const App = () => {
//...

  const handleAddItems = () => {
    // éåŒæœŸã§é‡ã„çŠ¶æ…‹æ›´æ–°ã‚’ãƒ©ãƒƒãƒ—
    startTransition(() => {
      const newItems = Array(10000).fill(0).map((_, i) => i);
      setItems(newItems); // éåŒæœŸçš„ã«å®Ÿè¡Œã•ã‚Œã€UIãŒãƒ•ãƒªãƒ¼ã‚ºã—ã«ãã„
    });
  };

  return (
//...
  );
};
export default App;
```
