---
title: "Commit ã‚„ PRï¼ˆãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰æ™‚ã«èµ°ã‚‹ Lint / Format ãƒ„ãƒ¼ãƒ«è¨­å®šã®ã¾ã¨ã‚"
emoji: "ğŸ‹"
type: "tech"
topics: ["lint", "ci", "husky", "precommit", "formatter"]
published: true
---

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ Lint / Format ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†ã¨ãã€ã€Œä¿å­˜æ™‚ã«è‡ªå‹•ã§æ•´å½¢ã™ã‚‹ã€ã€Œã‚³ãƒŸãƒƒãƒˆå‰ã«ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã€ã€ŒCI ã§æ¤œè¨¼ã™ã‚‹ã€ãªã©ã€å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°ã”ã¨ã«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚„ã—ãã¿ãŒã‚ã‹ã‚Œã¦ã„ã‚‹ã€‚

ã“ã®è¨˜äº‹ã§ã¯ã€åŸºæœ¬çš„ãªä½ç½®ã¥ã‘ã¨å®Ÿè¡Œãƒ•ãƒ­ãƒ¼ã‚’æ•´ç†ã—ã¾ã—ãŸã€‚

# ä¿å­˜æ™‚ã®å®Ÿè¡Œã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆç›´ä¸‹ã« `.json` / `.js` ãªã©ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ã
  ä¾‹: `eslint.config.js`, `prettier.config.json`, `toolname.json` ãªã©
- `.vscode/settings.json` ã‚’ä½¿ã£ã¦ã€ä¿å­˜æ™‚ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãªã©ã®å®Ÿè¡Œã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ãã‚‹

# CI
- .github/workflows ã« .ymlãªã©ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ã
 ä¾‹: .github/workflows/toolname.yml
- PRï¼ˆãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰ã‚’ä½œæˆãƒ»æ›´æ–°ã—ãŸã¨ãã«è‡ªå‹•ãƒã‚§ãƒƒã‚¯ãŒèµ°ã‚‹
- è¨­å®šã«ã‚ˆã£ã¦ã¯ã€PR ã«é™ã‚‰ãš push ã®ãŸã³ã«ãƒã‚§ãƒƒã‚¯ã‚’è‡ªå‹•å®Ÿè¡Œã•ã›ã‚‹ã“ã¨ã‚‚ã§ãã‚‹
- ã‚³ãƒ¼ãƒ‰ä¿®æ­£ã¯ã•ã‚Œãšã€ã‚¨ãƒ©ãƒ¼æ¤œå‡ºã ã‘
- å®Ÿè¡Œãƒ•ãƒ­ãƒ¼ã¯ä»¥ä¸‹ã®é€šã‚Š:
```txt
GitHub (CI):
push / PR
â†’ GitHub Actions (.github/workflows/toolname.yml)
â†’ pnpm <linter/formatter> check .
(ä¿®æ­£ã¯ã›ãšã€å¤±æ•—ãªã‚‰èµ¤ãƒãƒ„ãŒå‡ºã‚‹)
```

# pre-commit hook ã¨ Husky
- `package.json` ã« lint-staged ã®è¨­å®šã‚’æ›¸ã
- ã‚³ãƒŸãƒƒãƒˆæ™‚ã«è‡ªå‹•ã§å®Ÿè¡Œã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹
- å®Ÿè¡Œãƒ•ãƒ­ãƒ¼ã¯ä»¥ä¸‹ã®é€šã‚Š:
```txt
git commit
â†’ Husky (pre-commit hook)
â†’ lint-staged
â†’ linter / formatter (å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•æ•´å½¢)
```

## pre-commit hook ã¨ã¯
- lint-staged ã¯ã€Œã‚³ãƒŸãƒƒãƒˆã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã€ã‚’å¯¾è±¡ã«è‡ªå‹•æ•´å½¢ã‚’è¡Œã†

```json
"lint-staged": {
  "*.{ts,tsx,js,jsx,json}": "biome check --write"
}
```

## Husky ã¨ã¯
- Git ã® pre-commit hook ãªã©ã‚’ç°¡å˜ã«ç®¡ç†ã§ãã‚‹ãƒ„ãƒ¼ãƒ«
- pre-commit hook ã« `lint-staged` ã‚’å‘¼ã³å‡ºã™è¨­å®šã‚’è¿½åŠ ã§ãã‚‹
```json
{
  "lint-staged": {
    "*.{ts,tsx,js,jsx,json}": "biome check --write"
  },
  "scripts": {
    "postinstall": "husky install"
  },
  "devDependencies": {
    "husky": "^8.0.0",
    "lint-staged": "^15.0.0"
  }
}
```
