---
title: "useRefã®åŸºæœ¬ã¨ä½¿ã„æ–¹"
emoji: "ğŸ’"
type: "tech"
topics: ["javascript", "react", "ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰", "hooks", "ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„"]
published: true
---

useRefã¯ã€React 16.8ã‹ã‚‰å°å…¥ã•ã‚ŒãŸã€å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãªã—ã§å€¤ã‚„DOMè¦ç´ ã‚’æ›´æ–°ã§ãã‚‹Reactãƒ•ãƒƒã‚¯ã€‚

ã€ŒDOMã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸã„ã¨ãã€ã€Œå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãªã—ã§å€¤ã‚’ä¿æŒãƒ»æ›´æ–°ã—ãŸã„ã¨ãã€ã€Œå‰å›ã®å€¤ã‚„çŠ¶æ…‹ã‚’è¨˜éŒ²ã—ã¦ãŠããŸã„ã¨ãã€ãªã©ã«ä¾¿åˆ©ã€‚

ä½¿ã„æ–¹ã¯ï¼’ç¨®é¡ã‚ã‚‹ã€‚

## å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãªã—ã§å€¤ã‚’ä¿æŒãƒ»æ›´æ–°
- .currentã§æ“ä½œã™ã‚‹ã€‚
- ä½•åº¦ã§ã‚‚å¤‰æ›´ã§ãã€å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¯èµ·ããªã„ã€‚
- useStateã‚’ä½¿ã†ã¨ã€å€¤ã‚’å¤‰æ›´ã™ã‚‹ãŸã³ã«å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãŒèµ°ã‚Šã€çŠ¶æ…‹ã®æ›´æ–°ãŒé…å»¶ï¼ˆéåŒæœŸï¼‰ã—ã¦æ­£ã—ã„å€¤ãŒå–ã‚Œãªã„ã“ã¨ãŒã‚ã‚‹ã€‚ã“ã®ã‚ˆã†ãªã¨ãã«useRefã‚’ä½¿ãˆã‚‹ã€‚
```tsx
import { useRef, useState } from 'react';

const Component = () => {
ã€€// å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãªã—ã§å€¤ã‚’ä¿æŒãƒ»æ›´æ–°ã§ãã‚‹
  const inputValueRef = useRef<string>('');
  const [savedValue, setSavedValue] = useState('');

  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    inputValueRef.current = e.target.value;
  };

  const handleSave = () => {
    setSavedValue(inputValueRef.current);
  };

  return (
    <div>
      <input type="text" onChange={handleChange} />
      <button onClick={handleSave}>ä¿å­˜</button>
      <div>ä¿å­˜ã•ã‚ŒãŸå€¤: {savedValue}</div>
    </div>
  );
};
export default Component;
```

## DOMæ“ä½œã§ä½¿ã†
- DOMè¦ç´ ã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã€‚
- focus() ã‚’ä½¿ã£ã¦ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’å½“ã¦ã‚‹ãªã©ã€ç›´æ¥æ“ä½œã‚’ã—ãŸã„ã¨ãã«ä¾¿åˆ©ã€‚
- ã‚¤ãƒ™ãƒ³ãƒˆã‚„æ¡ä»¶ã«å¿œã˜ã¦ã€æ‰‹å‹•ã§DOMã‚’æ“ä½œã§ãã‚‹ã€‚
```tsx
import { useRef } from 'react';

const Component = () => {
  const inputRef = useRef<HTMLInputElement>(null);

  const handleFocus = () => {
    // inputè¦ç´ ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’å½“ã¦ã‚‹
    inputRef.current?.focus();
  };

  return (
    <div>
      <input ref={inputRef} type="text" />
      <button onClick={handleFocus}>ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’å½“ã¦ã‚‹</button>
    </div>
  );
};

export default Component;
```
### æ³¨æ„
ã€Œå€¤ã®ä¿æŒã€ã¨ã€ŒDOMè¦ç´ ã®å‚ç…§ã€ã¯ã€useRefã‚’åˆ¥ã€…ã«ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚åŒã˜useRefã§ä¸¡æ–¹ã®ç”¨é€”ã‚’åŒæ™‚ã«æ‰±ã†ã“ã¨ã¯ã§ããªã„ã€‚


## å€¤ã‚’ä¿æŒãƒ»æ›´æ–°ã®æ´¾ç”Ÿ: é–¢æ•°ã‚’å‹•çš„ã«ä¿æŒã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹
- å‹•çš„ã«é–¢æ•°ã‚’å…¥ã‚Œæ›¿ãˆãŸã„ã¨ãã«ä½¿ãˆã‚‹ã€‚
- å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãªã—ã§é–¢æ•°ã‚’ä¿æŒã§ãã‚‹ã€‚
```tsx:æœ€æ–°ã®é–¢æ•°ã‚’ä¿æŒã—ã€å¸¸ã«ãã‚Œã‚’å®Ÿè¡Œã™ã‚‹ä¾‹
import { useEffect, useRef } from 'react';

const Component = () => {
  const handlerRef = useRef<() => void>(() => {});

  const handleClick = () => {
    console.log('æœ€æ–°ã®ã‚¯ãƒªãƒƒã‚¯å‡¦ç†ï¼');
  };

  // æ¯å›æœ€æ–°ã®é–¢æ•°ã‚’handlerRefã«å…¥ã‚Œã¦ãŠã
  useEffect(() => {
    handlerRef.current = handleClick;
  });

  useEffect(() => {
    const interval = setInterval(() => {
      handlerRef.current(); // å¸¸ã«æœ€æ–°ã®é–¢æ•°ãŒå‘¼ã°ã‚Œã‚‹
    }, 1000);

    return () => clearInterval(interval);
  }, []);

  return <div>ä½•ã‹ã®UI</div>;
};
```
