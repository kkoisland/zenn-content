---
title: "React ã® Suspense ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’é…å»¶èª­ã¿è¾¼ã¿ã™ã‚‹"
emoji: "ğŸ“"
type: "tech"
topics: ["javascript", "react", "esmodules", "suspense", "codesplitting"]
published: true
---

## Suspenseã¨ã¯ï¼Ÿ
React ã® **Suspense** ã¯ã€éåŒæœŸã§èª­ã¿è¾¼ã¾ã‚Œã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„ãƒ‡ãƒ¼ã‚¿ãŒã€Œã¾ã æº–å‚™ã§ãã¦ã„ãªã„ã€ã¨ãã«ã€ä»£ã‚ã‚Šã«è¡¨ç¤ºã™ã‚‹ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯UIï¼ˆãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ãªã©ï¼‰ã‚’å®šç¾©ã™ã‚‹ä»•çµ„ã¿ã€‚

**React.lazy()** é–¢æ•°ã§ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å‹•çš„ã«èª­ã¿è¾¼ã¿ã€Suspense ã§èª­ã¿è¾¼ã¿å®Œäº†ã‚’å¾…ã¤ã€‚React ã¯æœªå®Œäº†ã® Promise ã‚’ throw ã—ã€Suspense ãŒãã‚Œã‚’ã‚­ãƒ£ãƒƒãƒã—ã¦ **fallback** ã‚’è¡¨ç¤ºã™ã‚‹ã€‚

React.lazy() ã‚’ä½¿ã£ãŸé…å»¶èª­ã¿è¾¼ã¿ã«å¯¾å¿œã—ãŸ Suspense ã¯ã€React 16.6 ä»¥é™ã§åˆ©ç”¨ã§ãã‚‹ã€‚

## React.lazyã®æ›¸ãæ–¹
```tsx
const LazyComponent = React.lazy(() => import('./MyComponent'));
```
- React.lazy() ã¯ é–¢æ•°ã‚’å¼•æ•°ã«ã¨ã‚‹
- ãã®é–¢æ•°ã®ä¸­ã§ import()ï¼ˆï¼å‹•çš„importï¼‰ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚‹


##  React.lazy() + Suspense ã®å…·ä½“ä¾‹
```tsx
// MyComponent.tsx å¯¾è±¡ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
export default function MyComponent() {
  return <div>Hello from lazy component!</div>;
}

// App.tsx è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ React.lazy() ã‚’ä½¿ã†
import React, { Suspense } from 'react';

// React ãŒå†…éƒ¨ã§ Promise ã‚’ throw ã—ã¦ãã‚Œã‚‹
const LazyComponent = React.lazy(() => import('./MyComponent'));

export default function App() {
  return (
    <div>
      <h1>App Component</h1>
      <Suspense fallback={<div>Loading lazy component...</div>}>
        <LazyComponent />
      </Suspense>
    </div>
  );
}
```
## æµã‚Œ
1. LazyComponent ã¯ã¾ã èª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„ï¼ˆåˆå›ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼‰
2. React.lazy() ã¯ import() ã‚’å®Ÿè¡Œ â†’ èª­ã¿è¾¼ã¿ãŒã¾ã å®Œäº†ã—ã¦ã„ãªã„
3. React ã¯ã€import() ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®èª­ã¿è¾¼ã¿ãŒçµ‚ã‚ã‚‹ã¾ã§æœªå®Œäº†ã® Promise ã‚’ throw ã™ã‚‹
4. ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ™‚ç‚¹ã§ã¾ã è§£æ±ºã•ã‚Œã¦ã„ãªã„å ´åˆã€React ãŒå†…éƒ¨ã§ Promise ã‚’ throw ã—ã€Suspense ãŒãã‚Œã‚’ã‚­ãƒ£ãƒƒãƒã—ã¦ fallback ã‚’è¡¨ç¤ºã™ã‚‹
5. fallback ã«æŒ‡å®šã—ãŸã€ŒLoading lazy component...ã€ãŒè¡¨ç¤ºã•ã‚Œã‚‹
6. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒèª­ã¿è¾¼ã¾ã‚ŒãŸã‚‰ã€LazyComponent ãŒæç”»ã•ã‚Œã‚‹
