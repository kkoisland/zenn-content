---
title: "useReducer(): åŸºæœ¬æ“ä½œã¨å®Ÿè£…ä¾‹"
emoji: "ğŸ’"
type: "tech"
topics: ["javascript", "react", "hooks"]
published: true
---

React v16.8.0 ä»¥é™ã§å°å…¥ã•ã‚ŒãŸ useReducer ã¯ã€è¤‡é›‘ãªçŠ¶æ…‹ç®¡ç†ã«é©ã—ãŸ React ã®ãƒ•ãƒƒã‚¯ã€‚ç¾åœ¨ã®çŠ¶æ…‹ã¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å—ã‘å–ã‚Šã€æ–°ã—ã„çŠ¶æ…‹ã‚’è¿”ã™ãƒªãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼é–¢æ•°ã§çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹ã€‚useReducer ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€è¤‡æ•°ã®çŠ¶æ…‹é·ç§»ã‚’ä¸€ã¤ã®é–¢æ•°å†…ã«é›†ç´„ã—ã€çŠ¶æ…‹ç®¡ç†ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ˜ç¢ºã«ä¿ã¤ã“ã¨ãŒã§ãã‚‹ã€‚

```tsx:CounterReducer.js
// 1. çŠ¶æ…‹ã®åˆæœŸå€¤ã‚’è¨­å®šã™ã‚‹
const initialState = { count: 0 };

// 2. ç¾åœ¨ã®çŠ¶æ…‹ã¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å—ã‘å–ã‚Šã€æ–°ã—ã„çŠ¶æ…‹ã‚’è¿”ã™ãƒªãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼é–¢æ•°ã‚’ä½œæˆã™ã‚‹
const reducer = (state, action) => {
  switch (action.type) {
    case 'INCREMENT':
      return { count: state.count + 1 };
    case 'DECREMENT':
      return { count: state.count - 1 };
    default:
      return state;
  }
};

export { initialState, reducer };
```

## ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã§ dispatch ã‚’å‘¼ã³å‡ºã™å ´åˆ
() => dispatch({ type: 'INCREMENT' }) ã®ã‚ˆã†ã«é–¢æ•°ã§ãƒ©ãƒƒãƒ—ã™ã‚‹ã€‚
```tsx:MyComponent.jsx
import React, { useReducer } from 'react';
import { reducer, initialState } from './CounterReducer';

const MyComponent = () => {
  // 3. useReducer ãƒ•ãƒƒã‚¯ã‚’ä½¿ç”¨ã™ã‚‹
  // ç¬¬ä¸€å¼•æ•°ã«ã¯ã€ãƒªãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼é–¢æ•°ã‚’æŒ‡å®šã™ã‚‹
  // ç¬¬äºŒå¼•æ•°ã«ã¯ã€çŠ¶æ…‹ã®åˆæœŸå€¤ã‚’æŒ‡å®šã™ã‚‹
  const [state, dispatch] = useReducer(reducer, initialState);

  return (
    <div>
      <p>Count: {state.count}</p>
      {/* é–¢æ•°ã«ã—ã¦æ¸¡ã™ */}
      <button onClick={() => dispatch({ type: 'INCREMENT' })}>Increment</button>
      <button onClick={() => dispatch({ type: 'DECREMENT' })}>Decrement</button>
    </div>
  );
};

export default MyComponent;
```

## é–¢æ•°å†…ã§ dispatch ã‚’å‘¼ã³å‡ºã™å ´åˆ
ç›´æ¥å‘¼ã³å‡ºã™ã€‚
```tsx: MyComponent.jsx
import React, { useReducer } from 'react';
import { reducer, initialState } from './CounterReducer';

const MyComponent = () => {
  // 3. useReducer ãƒ•ãƒƒã‚¯ã‚’ä½¿ç”¨ã™ã‚‹
  // ç¬¬ä¸€å¼•æ•°ã«ã¯ã€ãƒªãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼é–¢æ•°ã‚’æŒ‡å®šã™ã‚‹
  // ç¬¬äºŒå¼•æ•°ã«ã¯ã€çŠ¶æ…‹ã®åˆæœŸå€¤ã‚’æŒ‡å®šã™ã‚‹
  const [state, dispatch] = useReducer(reducer, initialState);

  // é–¢æ•°å†…ã§ dispatch ã‚’ç›´æ¥å‘¼ã³å‡ºã™
  const handleIncrement = () => {
    dispatch({ type: 'INCREMENT' });
  };

  const handleDecrement = () => {
    dispatch({ type: 'DECREMENT' });
  };

  return (
    <div>
      <p>Count: {state.count}</p>
      <button onClick={handleIncrement}>Increment</button>
      <button onClick={handleDecrement}>Decrement</button>
    </div>
  );
};

export default MyComponent;
```
